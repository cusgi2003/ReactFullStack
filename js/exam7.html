<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>JSONPlacehorder</h1>
    <button id="loadPostBtn">게시글 1개 불러오기</button>
    <h2>결과</h2>
    <div id="result"></div>


    <hr>
    <h2>게시글 5개 목록 불러오기</h2>
    <button id="loadPostsBtn">게시글 5개 불러오기</button>
    <ul id="postsList"></ul>

    <script>
        // 가상의 서버 역할 : jsonplaceholder
        // 요청 주소 : https://jsoneplaceholder.typicode.com/post/1


        // 버튼을 눌렀을 때 jsonplaeholder에게 게시글 1건을 다랄고 출력

        // 버튼을 눌렀을 떄 게시글 5 개의 제목만 리스트의 li로 넣기
        // 요청 주소 : https://jsonplaceholder.typicode.com/posts?_limit=5


        // json()메서드가 parse()와 같은 역할을 함
        // ID : xxx
        // 제목 : xxx
        // 내용 : xxx
        // 형태로 출력하기

        const loadPostBtn = document.querySelector("#loadPostBtn");
        const resultDiv = document.querySelector("#result");
            
        loadPostBtn.addEventListener("click", () => {
            fetch('https://jsonplaceholder.typicode.com/posts/1')
            .then(res => res.json)
            .then(data => {
                resultDiv.innerHTML = `
                    <p><strong>ID:</strong>${data.id}</p>
                    <p><strong>제목:</strong>${data.title}</p>
                    <p><strong>내용:</strong>${data.body}</p>
                `;
            })
        })




        async function loadPosts() {
            const postsList = document.querySelector("#postsList");
            postsList.innerHTML = "";


            try{
                const res = await fetch(`https://jsonplaceholder.typicode.com/posts?_limit=5`);

                if(!res.ok){
                    throw new Error("서버 오류");
                }

                // json으로 변환
                const posts = await res.json()

                posts.forEach(post => {
                    // html 요소로 변환하여 화면에 표시
                    const li = document.createElement("li");
                    li.textContent = `${post.title}`;

                    postsList.append(li);

                })
            } catch(err){
                postsList.innerHTML = `<li>데이터 불러오기 실패</li>`;
                console.log(err);
            }
        }

        document.querySelector("#loadPostsBtn")
            .addEventListener("click", loadPosts);

    </script>
</body>
</html>