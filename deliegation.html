<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
      <!-- <ul id="todo-list">
                <li data-id="1">React 공부하기</li>
                <li data-id="2">Java 과제하기</li>
                <li data-id="3">운동하기</Li>
         </ul> -->

    <!--
        실제 서비스에서는 <li>안엥 버튼, 아이콘 등이 섞여있을 때가 더 많다.
    -->

    <ul id="todo-list">
        <li data-id="1">
            <span class="text">React 공부하기</span><!DOCTYPE html>

        </li>
    </ul>
    <script>
        // querySelectorAll() : 해당되는 태그들을 모아서 htmlcollection을 반환
        // 유사 배열 객체 : 인덱스로 접근이 가능하나 실제 배열은 아님
        // const items = document.querySelector("#todo-list li");
        
        // // forEach를 이용해 각각의 요소를 순회하는 것이 가능
        // items.forEach((item) => {
        //     item.addEventListener("click", function(){
        //         console.log(items.textContent + `클릭됨`);
        //     })
        // })
        // // 각각의 요소에게 이벤트를 달아주는 것은 비효율적

        // const todoList = document.querySelector("#todo-list");
        // todoList.addEventListener('click', function(event){
        //     // 실제로 클릭된 요소 찾기
        //     const target = event.target;

        //     // 태그 이름 대문자
        //     if(target.tagName === 'Li'){
        //         const id = target.dataset.id;
        //         const text = target.textContent;

        //         console.log(`ID : ${id}, 내용 : ${text}`);
        //     }
        // })

        // ul에 이벤트 리스너 한개만 있다
        // <li>가 3개든, 100개든 나중에 js를 이용해서 추가하든 코드의 수정없이 
        // 그냥 동작을 한다
        // 유지보수, 성능 면에서 훨씬 좋다

        const todoList = document.querySelector("#todo-list");

        todoList.addEventListener('click', function(event){
            // li를 기준으로 가장 가까운 조상 찾기
            // 사용자가 클릭하는 위치가 다양하다
            // <li>를 직접 누를 수도 있고
            // 클릭한 요소가 span이든, button이든, 텍스트든 상관없이
            // 그 요소가 속한 liㄹ르 찾는다.

            
            const li = event.target.closest('li');

            if(!li || !todoList.contains(li)) return;

            const id = li.dataset.id; // <li data-id="10">

            if(event.target.matches('.delete-btn')){
                console.log(`ID ${id} 항목 삭제`);
                li.remove();
                return;
            }

            // 그 외 li 영역 클릭시 
        })
    </script>
</body>
</html>